<table class="table table-striped table-bordered table-hover table-responsive active pb-table pb-search">
    <tbody ng-repeat="loc in data">
        <tr>
            <td colspan="8"><h4>{{loc.location}} - {{loc.fascia}}</h4></td>
            <td colspan="3" class="quantity"><h4>Total Quantity: {{utils.totalQuantity(loc.location)}}</h4></td>
            <td colspan="3" class="currency"><h4>Total Value: {{utils.totalValue(loc.location) | pbCurrency}}</h4></td>
        </tr>
        <tr>
            <th ng-style="{'display': isDisplayed(0)}" class="col-sm hidable-col">Division</th>
            <th ng-style="{'display': isDisplayed(1)}" class="col-sm hidable-col">Department</th>
            <th ng-style="{'display': isDisplayed(2)}" class="col-sm hidable-col">Class</th>
            <th ng-style="{'display': isDisplayed(3)}" class="col-sm hidable-col">Product</th>
            <th ng-style="{'display': isDisplayed(4)}" class="col-sm hidable-col">Location</th>
            <th ng-style="{'display': isDisplayed(5)}" class="col-sm quantity hidable-col">Stock Qty.</th>
            <th ng-style="{'display': isDisplayed(6)}" class="col-sm currency hidable-col">Unit Cost</th>
            <th ng-style="{'display': isDisplayed(7)}" class="col-sm currency hidable-col">Stock Value</th>
            <th ng-style="{'display': isDisplayed(8)}" class="col-sm date hidable-col">Last Received Date</th>
            <th ng-style="{'display': isDisplayed(9)}" class="col-sm hidable-col">Last Txn. Type</th>
            <th ng-style="{'display': isDisplayed(10)}" class="col-sm hidable-col">Last Txn. Id</th>
            <th ng-style="{'display': isDisplayed(11)}" class="col-sm hidable-col">Last Txn. Narration</th>
            <th ng-style="{'display': isDisplayed(12)}" class="col-sm date hidable-col">Last Txn. Date</th>
            <th class="col-sm">Stock Movement</th>
        </tr>
        <tr ng-repeat="x in loc.items">
            <td ng-style="{'display': isDisplayed(0)}" class="hidable-col">{{x.division}}</td>
            <td ng-style="{'display': isDisplayed(1)}" class="hidable-col">{{x.department}}</td>
            <td ng-style="{'display': isDisplayed(2)}" class="hidable-col">{{x.class}}</td>
            <td ng-style="{'display': isDisplayed(3)}" class="hidable-col"><a href="{{resolve('Merchandising/Products/Details/' + x.productId)}}">{{x.sku}} - {{x.description}}</a></td>
            <td ng-style="{'display': isDisplayed(4)}" class="hidable-col"><a href="{{resolve('Merchandising/Locations/Detail/' + x.locationId)}}">{{x.location}}</a></td>
            <td ng-style="{'display': isDisplayed(5)}" class="quantity hidable-col">{{x.stockOnHandQuantity}}</td>
            <td ng-style="{'display': isDisplayed(6)}" class="currency hidable-col">{{x.averageWeightedCost | pbCurrency}}</td>
            <td ng-style="{'display': isDisplayed(7)}" class="currency hidable-col">{{x.stockOnHandValue | pbCurrency}}</td>
            <td ng-style="{'display': isDisplayed(8)}" class="date hidable-col">{{x.dateLastReceived | pbDate }}</td>
            <td ng-style="{'display': isDisplayed(9)}" class="hidable-col">{{x.lastTransactionType}}</td>
            <td ng-style="{'display': isDisplayed(10)}" class="hidable-col">{{x.lastTransactionId}}</td>
            <td ng-style="{'display': isDisplayed(11)}" class="hidable-col">{{x.lastTransactionNarration}}</td>
            <td ng-style="{'display': isDisplayed(12)}" class="hidable-col">{{x.lastTransactionDate | pbDate }}</td>
            <td class="text-center"><span class="btn-link" ng-click="utils.showMovement(x)">View</span></td>
        </tr>
    </tbody>
</table>
  
