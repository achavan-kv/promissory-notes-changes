<table class="table table-striped table-bordered table-hover table-responsive active pb-table" ng-hide="!data">
    <tbody ng-repeat="location in data">
        <tr>
            <td colspan="14"><h4>{{location[0].location}}</h4></td>
        </tr>
        <tr>
            <th ng-style="{'display': isDisplayed(0)}" class="col-sm hidable-col">Division</th>
            <th ng-style="{'display': isDisplayed(1)}" class="col-sm hidable-col">Department</th>
            <th ng-style="{'display': isDisplayed(2)}" class="col-sm hidable-col">Class</th>
            <th ng-style="{'display': isDisplayed(3)}" class="col-sm hidable-col">Type</th>
            <th ng-style="{'display': isDisplayed(4)}" class="col-sm hidable-col">Transaction</th>
            <th ng-style="{'display': isDisplayed(5)}" class="col-sm hidable-col">Product</th>
            <th ng-style="{'display': isDisplayed(6)}" class="col-sm hidable-col">Brand</th>
            <th ng-style="{'display': isDisplayed(7)}" class="col-sm hidable-col">Product Tags</th>
            <th ng-style="{'display': isDisplayed(8)}" class="col-sm hidable-col">Location</th>
            <th ng-style="{'display': isDisplayed(9)}" class="col-sm hidable-col quantity">Quantity</th>
            <th ng-style="{'display': isDisplayed(10)}" class="col-sm hidable-col quantity">Stock On Hand</th>
            <th ng-style="{'display': isDisplayed(11)}" class="col-sm hidable-col date">Date</th>
            <th ng-style="{'display': isDisplayed(12)}" class="col-sm hidable-col date">Date Processed</th>
            <th ng-style="{'display': isDisplayed(13)}" class="col-sm hidable-col">User</th>
        </tr>
        <tr ng-repeat="m in location" ng-class="{ 'total': (m.type=='Opening Balance')}">
            <td ng-style="{'display': isDisplayed(0)}" class=" hidable-col">{{m.division}}</td>
            <td ng-style="{'display': isDisplayed(1)}" class=" hidable-col">{{m.department}}</td>
            <td ng-style="{'display': isDisplayed(2)}" class=" hidable-col">{{m.class}}</td>
            <td ng-style="{'display': isDisplayed(3)}" class=" hidable-col">{{m.type}}</td>
            <td ng-style="{'display': isDisplayed(4)}" class=" wide hidable-col"><span ng-hide="utils.transactionLink(m)">{{m.narration}}</span><a ng-show="utils.transactionLink(m)" href="{{utils.transactionLink(m)}}">{{m.narration}}</a></td>
            <td ng-style="{'display': isDisplayed(5)}" class=" hidable-col"><a href="{{resolve('Merchandising/Products/Details/' + m.productId)}}">{{m.sku}} - {{m.longDescription}}</a></td>
            <td ng-style="{'display': isDisplayed(6)}" class=" hidable-col">{{m.brandName}}</td>
            <td ng-style="{'display': isDisplayed(7)}" class=" hidable-col"><span ng-repeat="tag in m.tags">{{tag}} </span></td>
            <td ng-style="{'display': isDisplayed(8)}" class=" hidable-col"><a href="{{resolve('Merchandising/Locations/Detail/' + m.locationId)}}">{{m.location}}</a></td>
            <td ng-style="{'display': isDisplayed(9)}" class=" quantity hidable-col">{{m.quantity}}</td>
            <td ng-style="{'display': isDisplayed(10)}" class=" quantity hidable-col">{{m.stockLevel}}</td>
            <td ng-style="{'display': isDisplayed(11)}" class=" date hidable-col">{{m.dateUTC || m.date | pbDate : m.dateUTC}}</td>
            <td ng-style="{'display': isDisplayed(12)}" class=" date hidable-col">{{m.dateProcessedUTC || m.dateProcessed | pbDate : m.dateProcessedUTC }}</td>
            <td ng-style="{'display': isDisplayed(13)}" class=" hidable-col">{{m.user || 'System'}}</td>
        </tr>
    </tbody>
</table>