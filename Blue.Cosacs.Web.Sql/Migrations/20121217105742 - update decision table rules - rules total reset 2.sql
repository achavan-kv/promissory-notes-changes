INSERT [Config].[DecisionTable] ([Key], [CreatedUtc], [Value]) VALUES (N'SR.DecisionTable.Charge', CAST(0x0000A12A01039C11 AS DateTime), N'{"conditions":[{"expression":"isNaN(this.serviceRequest.ItemId)"},{"expression":"true"}],"actions":[{"expression":"(this.MasterData.ServiceChargeTos = [''Customer'', ''Deliverer'', ''ehehe'']) &&\n(this.serviceRequest.ResolutionPrimaryCharge = ''Customer'')"}],"rules":[{"values":["false",null],"actions":[false]},{"values":["","true"],"actions":[true]}]}')
INSERT [Config].[DecisionTable] ([Key], [CreatedUtc], [Value]) VALUES (N'SR.DecisionTable.Payment', CAST(0x0000A12A01039C11 AS DateTime), N'{"conditions":[{"expression":"isNaN(this.serviceRequest.ItemId)"}],"actions":[],"rules":[{"values":["false"],"actions":[]},{"values":[""],"actions":[]}]}')
INSERT [Config].[DecisionTable] ([Key], [CreatedUtc], [Value]) VALUES (N'SR.DecisionTable.Workflow', CAST(0x0000A12A01039C11 AS DateTime), N'{"conditions":[{"expression":"this.srType"},{"expression":"this.serviceRequest.Type"},{"expression":"!isEmpty(this.serviceRequest.WarrantyContractNumber)"},{"expression":"((new Date(+this.serviceRequest.ItemSoldOn +\n (new Date((365.25/12)*(24*3600*1000)) *\n (this.serviceRequest.WarrantyLength || 0) ))) >= (new Date()))"},{"expression":"(typeof this.serviceRequest.Account !== ''undefined'') &&\nthis.serviceRequest.Account !== null &&\nthis.serviceRequest.Account.length > 0"},{"expression":"(typeof this.serviceRequest.FoodLoss === ''undefined'') ||\n this.serviceRequest.FoodLoss === null ||\n this.serviceRequest.FoodLoss.length === 0"},{"expression":"this.serviceRequest.id !== 0 && this.serviceForm.$pristine && (typeof this.serviceRequest.AllocationServiceScheduledOn !== ''undefined'') && this.serviceRequest.AllocationServiceScheduledOn !== null"},{"expression":"isNaN(this.serviceRequest.ItemId)"},{"expression":"this.serviceRequest.Id === 0"},{"expression":"this.CustomerSearch.Type === ''Invoice''"}],"actions":[{"expression":"this.sections.screen.visible = true"},{"expression":"this.sections.pageHeading.visible = false"},{"expression":"this.sections.searchSelectorInput.visible = true"},{"expression":"this.sections.searchSelectorInput.visible = false"},{"expression":"this.sections.customerMenu.visible = true"},{"expression":"this.sections.customerMenu.visible = false"},{"expression":"this.sections.evaluationMenu.visible = true"},{"expression":"this.sections.evaluationMenu.visible = false"},{"expression":"this.sections.estimateMenu.visible = true"},{"expression":"this.sections.estimateMenu.visible = false"},{"expression":"this.sections.customerForm.visible = true"},{"expression":"this.sections.customerForm.visible = false"},{"expression":"this.sections.evaluationForm.visible = true"},{"expression":"this.sections.evaluationForm.visible = false"},{"expression":"this.sections.estimateForm.visible = true"},{"expression":"this.sections.estimateForm.visible = false"},{"expression":"this.sections.productForm.visible = true"},{"expression":"this.sections.productForm.visible = false"},{"expression":"this.sections.productForm.stockLocationVisible = true"},{"expression":"this.sections.productForm.stockLocationVisible = false"},{"expression":"this.sections.abc= false"},{"expression":"this.sections.abc= false"},{"expression":"this.sections.warrantyForm.visible = true"},{"expression":"this.sections.warrantyForm.visible = false"},{"expression":"this.sections.showPrintInvoice.visible = true"},{"expression":"this.sections.showPrintInvoice.visible = false"},{"expression":"this.sections.optionFoodLossMenu.visible = true"},{"expression":"this.sections.optionFoodLossMenu.visible = false"},{"expression":"this.sections.optionFoodLossForm.visible = true"},{"expression":"this.sections.optionFoodLossForm.visible = false"},{"expression":"this.sections.optionFoodLossPrint.visible = true"},{"expression":"this.sections.optionFoodLossPrint.visible = false"},{"expression":"this.sections.customerDetail.visible = true"},{"expression":"this.sections.customerDetail.visible = false"},{"expression":"this.sections.printFoodLoss.visible = true"},{"expression":"this.sections.printFoodLoss.visible = false"},{"expression":"this.sections.outOfWarrantyCoverMessage.visible = true"},{"expression":"this.sections.outOfWarrantyCoverMessage.visible = false"},{"expression":"this.sections.formReferenceField.visible = true"},{"expression":"this.sections.formReferenceField.visible = false"},{"expression":"this.sections.serviceRequestStatus.visible = true"},{"expression":"this.sections.serviceRequestStatus.visible = false"},{"expression":"(this.MasterData.ServiceChargeTos = [''Customer'',''Deliverer'',''EW'',''Internal'',''Supplier'']) &&\n(this.serviceRequest.ResolutionPrimaryCharge = ''Customer'')"},{"expression":"(this.MasterData.ServiceChargeTos = [''Customer'',''Deliverer'',''EW'',''Internal'',''Supplier'']) &&\n(this.serviceRequest.ResolutionPrimaryCharge = ''Deliverer'')"},{"expression":"(this.MasterData.ServiceChargeTos = [''Customer'',''Deliverer'',''EW'',''Internal'',''Supplier'']) &&\n(this.serviceRequest.ResolutionPrimaryCharge = ''EW'')"},{"expression":"(this.MasterData.ServiceChargeTos = [''Customer'',''Deliverer'',''EW'',''Internal'',''Supplier'']) &&\n(this.serviceRequest.ResolutionPrimaryCharge = ''Internal'')"},{"expression":"(this.MasterData.ServiceChargeTos = [''Customer'',''Deliverer'',''EW'',''Internal'',''Supplier'']) &&\n(this.serviceRequest.ResolutionPrimaryCharge = ''Supplier'')"},{"expression":"this.sections.branchSearch.visible = true"},{"expression":"this.sections.branchSearch.visible = false"}],"rules":[{"values":["SI",null,null,"",null,null,null,null,null,null],"actions":[false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,true,false,false,false,false,false,false]},{"values":["SE",null,null,null,null,null,null,null,null,null],"actions":[false,false,false,true,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,true,false,true,false,false,false,true,false,false,false,false,false,false,false,false,true,false,false,false,false,false]},{"values":["II","",null,null,null,null,null,null,null,null],"actions":[false,false,true,false,false,false,false,true,false,true,false,false,false,false,true,false,false,true,false,false,false,false,false,false,true,false,true,false,true,false,true,false,false,false,true,false,false,false,false,false,false,false,false,false,true,false,false,false,false]},{"values":["IE",null,"",null,null,null,null,null,null,null],"actions":[false,false,false,true,false,false,false,true,false,false,true,false,false,false,true,false,false,true,false,false,false,false,false,true,false,false,true,false,true,false,true,false,false,false,true,false,false,false,false,false,false,false,false,false,false,true,false,false,false]},{"values":["S",null,null,null,null,null,null,null,null,null],"actions":[false,false,false,true,false,true,false,true,false,true,false,true,false,false,true,false,false,false,false,false,false,false,false,true,false,true,false,true,false,true,false,true,false,false,true,false,false,false,false,false,false,false,false,false,false,false,true,false,false]},{"values":["SI","","true",null,null,null,null,null,null,null],"actions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false]},{"values":["SI",null,"","true",null,null,null,null,null,null],"actions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false]},{"values":["","",null,null,"",null,null,"true",null,null],"actions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"values":[null,null,"true","true","","","",null,null,null],"actions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"values":[null,null,null,null,"true","","",null,null,null],"actions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,true,false,true,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"values":[null,null,null,null,null,"true","true",null,null,null],"actions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"values":[null,"SI",null,null,null,null,null,"",null,null],"actions":[false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false]},{"values":[null,"SE",null,null,null,null,null,"",null,null],"actions":[false,false,false,true,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,true,false,true,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"values":[null,"II",null,null,null,null,null,null,null,null],"actions":[false,false,true,false,false,false,false,true,false,true,false,false,false,false,true,false,false,true,false,false,false,false,false,false,true,false,true,false,true,false,true,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"values":[null,"IE",null,null,null,null,null,null,null,null],"actions":[false,false,false,true,false,false,false,true,false,false,true,false,false,false,true,false,false,true,false,false,false,false,false,true,false,false,true,false,true,false,true,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"values":[null,"S",null,null,null,null,null,null,null,null],"actions":[false,false,false,true,false,true,false,true,false,true,false,true,false,false,true,false,false,false,false,false,false,false,false,true,false,true,false,true,false,true,false,true,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"values":[null,null,null,null,null,null,null,null,"true",null],"actions":[false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},{"values":[null,null,null,null,null,null,null,null,null,"true"],"actions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false]}],"extensions":"var isEmpty = function(val) {\n    return _.isEmpty(val);\n}"}')
INSERT [Config].[DecisionTable] ([Key], [CreatedUtc], [Value]) VALUES (N'SR.DecisionTable.ServiceStatus', CAST(0x0000A12A01039C11 AS DateTime), N'{"conditions":[{"expression":"\"Estimate section is completed\"&& !isEmpty(this.serviceRequest.EstimateDateRecieved)&& !isEmpty(this.serviceRequest.EstimateLabourCost)&& !isEmpty(this.serviceRequest.EstimateAdditionalLabourCost)&& !isEmpty(this.serviceRequest.EstimateTransportCost)"},{"expression":"\"Evaluation section is completed\"&& !isEmpty(this.serviceRequest.EvaluationLocation)&& !isEmpty(this.serviceRequest.EvaluationAction)&& !isEmpty(this.serviceRequest.EvaluationClaimFoodLoss)&& !isEmpty(this.serviceRequest.ScriptAnswer)"},{"expression":"\"Allocation section is completed\"&&\n!isEmpty(this.serviceRequest.AllocationItemReceivedOn)&&\n!isEmpty(this.serviceRequest.AllocationPartExpectOn)&& !isEmpty(this.serviceRequest.AllocationServiceScheduledOn)&& !isEmpty(this.serviceRequest.AllocationTechnician)&& !isEmpty(this.serviceRequest.AllocationZone)"},{"expression":"\"parts date is in the future\" && this.serviceRequest.AllocationPartExpectOn!==null && dateIsValid(this.serviceRequest.AllocationPartExpectOn) &&\nthis.serviceRequest.AllocationPartExpectOn >= (new Date())"},{"expression":"\"allocation date is in the future\" && this.serviceRequest.AllocationServiceScheduledOn!==null &&\ndateIsValid(this.serviceRequest.AllocationServiceScheduledOn)"},{"expression":"\"Resolution section is completed\" &&\n!isEmpty(this.serviceRequest.ResolutionCategory)&&\ndateIsValid(this.serviceRequest.ResolutionDate)&&\n!isEmpty(this.serviceRequest.ResolutionPrimaryCharge)&&\n!isEmpty(this.serviceRequest.ResolutionSupplierToCharge)&&\n!isEmpty(this.serviceRequest.ResolutionCategory)&&\n!isEmpty(this.serviceRequest.Parts)&&\n!isEmpty(this.serviceRequest.ResolutionLabourCost)&&\n!isEmpty(this.serviceRequest.ResolutionAdditionalCost)&&\n!isEmpty(this.serviceRequest.ResolutionTransportCost)&&\n!isEmpty(this.serviceRequest.ResolutionReport)&&\n!isNaN(this.serviceRequest.WarrantyContractNumber)"},{"expression":"\"Finalize section is completed\"&& !isEmpty(this.serviceRequest.FinalizedFailure)&& dateIsValid(this.serviceRequest.FinialiseReturnDate)"},{"expression":"isEmpty(this.serviceRequest.State)"},{"expression":"\"Charge to is customer\""},{"expression":"\"Outstanding balance > 0\""}],"actions":[{"expression":"this.serviceRequest.State = ''New''"},{"expression":"this.serviceRequest.State = ''Awaiting estimate''"},{"expression":"this.serviceRequest.State = ''Awaiting allocation''"},{"expression":"this.serviceRequest.State = ''Estimate overdue''"},{"expression":"this.serviceRequest.State = ''Awaiting deposit''"},{"expression":"this.serviceRequest.State = ''Awaiting spare parts''"},{"expression":"this.serviceRequest.State = ''Awaiting repair''"},{"expression":"this.serviceRequest.State = ''Repair overdue''"},{"expression":"this.serviceRequest.State = ''Repaired''"},{"expression":"this.serviceRequest.State = ''Resolved''"},{"expression":"this.serviceRequest.State = ''Awaiting payment''"},{"expression":"this.serviceRequest.State = ''Closed''"},{"expression":"this.serviceRequest.isClosed = true"}],"rules":[{"values":["false","false","false","false","false","false","false","","",null],"actions":[true,false,false,false,false,false,false,false,false,false,false,false,false]},{"values":["","true","false","false","false","false","false","","",null],"actions":[false,false,true,false,false,false,false,false,false,false,false,false,false]},{"values":["","","true","true",null,null,null,null,null,null],"actions":[false,false,false,false,false,true,false,false,false,false,false,false,false]},{"values":["","","true","false","true",null,null,null,null,null],"actions":[false,false,false,false,false,false,true,false,false,false,false,false,false]},{"values":["","","true","","false","false","false",null,null,null],"actions":[false,false,false,false,false,false,false,true,false,false,false,false,false]},{"values":["","","","","","true","false",null,null,null],"actions":[false,false,false,false,false,false,false,false,false,true,false,false,false]},{"values":["","","","","","","true",null,null,null],"actions":[false,false,false,false,false,false,false,false,false,false,false,true,true]},{"values":[null,null,null,null,null,null,null,"true",null,null],"actions":[true,false,false,false,false,false,false,false,false,false,false,false,false]}],"extensions":"var isEmpty = function(val) {\n    return _.isEmpty(val);\n};\nvar dateIsValid = function(val) {\n    return window.moment(val).isValid();\n};\nvar teste = function(scope) {\n\n    if (\"Resolution section is completed\" &&\n        !isEmpty(scope.serviceRequest.ResolutionCategory)&&\n        !isEmpty(scope.serviceRequest.ResolutionDate)&&\n        !isEmpty(scope.serviceRequest.ResolutionPrimaryCharge)&&\n        !isEmpty(scope.serviceRequest.ResolutionSupplierToCharge)&&\n        !isEmpty(scope.serviceRequest.ResolutionCategory)&&\n        !isEmpty(scope.serviceRequest.Parts)&&\n        !isEmpty(scope.serviceRequest.ResolutionLabourCost)&&\n        !isEmpty(scope.serviceRequest.ResolutionAdditionalCost)&&\n        !isEmpty(scope.serviceRequest.ResolutionTransportCost)&&\n        !isEmpty(scope.serviceRequest.ResolutionReport)&&\n        !isNaN(scope.serviceRequest.WarrantyContractNumber)) {\n        alert(\"aiai\");\n    }\n};"}')
